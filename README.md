# Telegram Crawler

Программа для сбора статистики публикаций из Telegram-каналов университетов.

## Описание

Программа собирает данные о публикациях из Telegram-каналов и групп, связанных с университетами (МГУ и СПбГУ), за последние 30 дней. Собранные данные включают:
- Дату публикации
- Текст сообщения
- Количество просмотров
- Количество репостов

Результаты сохраняются в CSV-файл и визуализируются в виде графика.

## Структура проекта

```
telegram-crawler/
├── main.py                 # Основной файл для запуска программы
├── auth.py                 # Модуль для аутентификации в Telegram
├── data_collector.py       # Модуль для сбора и обработки данных
├── .env                    # Файл с настройками
├── requirements.txt        # Зависимости проекта
├── telegram_stats.csv      # Файл с собранными данными (создается после запуска)
├── daily_posts.png         # График публикаций (создается после запуска)
└── README.md               # Документация проекта
```

## Установка

1. Клонируйте репозиторий:
```bash
git clone <repository-url>
cd telegram-crawler
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Заполните файл `.env` (необязательно) следующими переменными:
```
API_ID=your_api_id_here
API_HASH=your_api_hash_here
PHONE=your_phone_number_here
```

## Получение API-ключей

1. Перейдите на https://my.telegram.org
2. Войдите в свой аккаунт Telegram
3. Перейдите в раздел "API development tools"
4. Создайте новое приложение
5. Скопируйте `api_id` и `api_hash` в файл `.env`

## Использование

1. Запустите программу:
```bash
python main.py
```

2. Если в файле `.env` отсутствуют необходимые данные, программа запросит:
   - API_ID (число)
   - API_HASH (строка)
   - Номер телефона в формате +7XXXXXXXXXX

3. Если включена двухфакторная аутентификация, потребуется ввести пароль.

4. После успешной аутентификации программа:
   - Найдет все каналы и группы, связанные с университетами
   - Соберет статистику публикаций
   - Сохранит данные в файл `telegram_stats.csv`
   - Создаст график `daily_posts.png`

## Результаты

- `telegram_stats.csv` - таблица с собранными данными
- `daily_posts.png` - график количества публикаций по дням

## Структура данных в CSV

- `university` - название университета
- `publication_date` - дата публикации
- `message` - текст сообщения
- `views` - количество просмотров
- `forwards` - количество репостов

## Требования

- Python 3.7+
- telethon
- pandas
- matplotlib
- python-dotenv

## Примечания

- Скрипт собирает данные только из публичных каналов и групп
- Для доступа к закрытым каналам и группам необходимо быть их участником
- При частых запросах Telegram может временно блокировать доступ
- При включенной двухфакторной аутентификации потребуется ввести дополнительный пароль
- ⚠️ **Важно**: При авторизации через API Telegram автоматически завершает все другие сессии на других устройствах в целях безопасности. После завершения работы скрипта вам нужно будет заново войти в Telegram на всех устройствах. 